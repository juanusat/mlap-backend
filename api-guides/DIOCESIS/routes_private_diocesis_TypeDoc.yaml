openapi: 3.0.3
info:
  title: API de Gestión de Tipos de Documentos (Diocesis)
  version: 1.0.0
paths:
  /api/diocese/document-types/create:
    post:
      tags:
        - Tipos de Documentos
      summary: Crear un nuevo tipo de documento.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: Carnet de Sanidad
                  description: Nombre del tipo de documento.
                description:
                  type: string
                  example: Certificado de salud.
                  description: Descripción del tipo de documento.
                code:
                  type: string
                  example: CARNET_SANIDAD
                  description: Nombre corto o código del tipo de documento (corresponde a DocumentType.code).
              required:
                - name
                - code
                - description
      responses:
        '200':
          description: Éxito. Tipo de documento creado.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: string
                  data:
                    type: object
                    example: {}
                  error:
                    type: string
                    nullable: true
                    example: ""
                  traceback:
                    type: string
                    nullable: true
                    example: ""

  /api/diocese/document-types/list:
    post:
      tags:
        - Tipos de Documentos
      summary: Listar tipos de documentos con paginación.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                page:
                  type: integer
                  example: 1
                  description: Número de página para la paginación.
                limit:
                  type: integer
                  example: 10
                  description: Máximo de registros por página.
              required:
                - page
                - limit
      responses:
        '200':
          description: Éxito. Lista de tipos de documentos.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          description: ID.
                          example: 1
                        name:
                          type: string
                          description: Nombre.
                          example: DNI
                        description:
                          type: string
                          description: Descripción.
                          example: Documento nacional de identidad
                        active:
                          type: boolean
                          description: Estado (switch).
                          example: true
                  error:
                    type: string
                    nullable: true
                    example: ""
                  traceback:
                    type: string
                    nullable: true
                    example: ""
                  meta:
                    type: object
                    properties:
                      total_records:
                        type: integer
                        example: 100
                        description: Total de registros disponibles.

  /api/diocese/document-types/search:
    post:
      tags:
        - Tipos de Documentos
      summary: Buscar tipos de documentos por nombre/descripción con paginación.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                query:
                  type: string
                  example: "nacional"
                  description: Término de búsqueda (por nombre o descripción).
                page:
                  type: integer
                  example: 1
                  description: Número de página para la paginación.
                limit:
                  type: integer
                  example: 10
                  description: Máximo de registros por página.
              required:
                - query
                - page
                - limit
      responses:
        '200':
          description: Éxito. Resultados de la búsqueda.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          description: ID.
                          example: 1
                        name:
                          type: string
                          description: Nombre.
                          example: DNI
                        description:
                          type: string
                          description: Descripción.
                          example: Documento nacional de identidad
                        active:
                          type: boolean
                          description: Estado (switch).
                          example: true
                  error:
                    type: string
                    nullable: true
                    example: ""
                  traceback:
                    type: string
                    nullable: true
                    example: ""
                  meta:
                    type: object
                    properties:
                      total_records:
                        type: integer
                        example: 5
                        description: Total de registros que cumplen con la búsqueda.

  /api/diocese/document-types/{id}:
    get:
      tags:
        - Tipos de Documentos
      summary: Obtener el detalle de un tipo de documento por ID.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            example: 1
          description: ID del tipo de documento.
      responses:
        '200':
          description: Éxito. Detalle del tipo de documento.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: string
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                        description: ID.
                      name:
                        type: string
                        example: DNI
                        description: Nombre.
                      description:
                        type: string
                        example: Documento principal de identificación.
                        description: Descripción.
                      code:
                        type: string
                        example: DNI
                        description: Nombre corto.
                  error:
                    type: string
                    nullable: true
                    example: ""
                  traceback:
                    type: string
                    nullable: true
                    example: ""

    put:
      tags:
        - Tipos de Documentos
      summary: Actualizar COMPLETAMENTE un tipo de documento por ID.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            example: 1
          description: ID del tipo de documento a actualizar.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: Documento Nacional de Identidad (Nuevo)
                  description: Nombre del tipo de documento.
                description:
                  type: string
                  example: Documento principal de identificación actualizado.
                  description: Descripción del tipo de documento.
                code:
                  type: string
                  example: DNI_NUEVO
                  description: Nombre corto o código.
              required:
                - name
                - code
                - description
      responses:
        '200':
          description: Éxito. Tipo de documento actualizado.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: string
                  data:
                    type: object
                    example: {}
                  error:
                    type: string
                    nullable: true
                    example: ""
                  traceback:
                    type: string
                    nullable: true
                    example: ""

    patch:
      tags:
        - Tipos de Documentos
      summary: Actualizar PARCIALMENTE los datos (Nombre, Descripción, Código) de un tipo de documento.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            example: 1
          description: ID del tipo de documento.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: DNI modificado
                  description: Nombre del tipo de documento.
                description:
                  type: string
                  example: Documento principal modificado.
                  description: Descripción del tipo de documento.
                code:
                  type: string
                  example: DNI_MOD
                  description: Nombre corto o código.
      responses:
        '200':
          description: Éxito. Datos actualizados.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: string
                  data:
                    type: object
                    example: {}
                  error:
                    type: string
                    nullable: true
                    example: ""
                  traceback:
                    type: string
                    nullable: true
                    example: ""

  /api/diocese/document-types/{id}/status:
    patch:
      tags:
        - Tipos de Documentos
      summary: Actualizar el estado (switch/active) de un tipo de documento.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            example: 1
          description: ID del tipo de documento.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                active:
                  type: boolean
                  example: false
                  description: Estado de activación (switch).
              required:
                - active
      responses:
        '200':
          description: Éxito. Estado actualizado.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: string
                  data:
                    type: object
                    example: {}
                  error:
                    type: string
                    nullable: true
                    example: ""
                  traceback:
                    type: string
                    nullable: true
                    example: ""

  /api/diocese/document-types/{id}/delete:
    delete:
      tags:
        - Tipos de Documentos
      summary: Eliminar físicamente un tipo de documento por ID.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            example: 1
          description: ID del tipo de documento a eliminar.
      responses:
        '200':
          description: Éxito. Tipo de documento eliminado.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: string
                  data:
                    type: object
                    example: {}
                  error:
                    type: string
                    nullable: true
                    example: ""
                  traceback:
                    type: string
                    nullable: true
                    example: ""