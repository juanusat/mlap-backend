--- INSTRUCCIONES DE GENERACIÓN DE API (Gestionar Actos Litúrgicos) 

Para: routes_private_actos_GestionarActos.yaml

---

OBJETIVO:
Generar la especificación completa de las rutas (endpoints) del Módulo 'Actos Litúrgicos' - Submódulo 'Gestionar Eventos' (EventVariant), basándose estrictamente en las reglas de nomenclatura y formato de respuesta proporcionadas.

JERARQUÍA DE MÓDULOS REQUERIDA:
La ruta base para este módulo debe ser: /api/acts

REGLAS DE ENDPOINTS:
1.  **Obtener/Ver:** /{ruta}/{id} [GET]
2.  **Actualizar (Total):** /{ruta}/{id} [PUT]
3.  **Actualizar (Parcial/Lógica):** /{ruta}/{id} [PATCH] (Usar para baja lógica de 'Estado' o 'Eliminar').
4.  **Crear:** /{ruta}/create [POST]
5.  **Listar (Paginado):** /{ruta}/list [POST]
6.  **Buscar (Paginado/Filtrado):** /{ruta}/search [POST]
7.  Los métodos GET no tienen body de entrada, solo parámetros de ruta o query.

REGLAS DE FORMATO DE RESPUESTA (OBLIGATORIO):
Todas las respuestas DEBEN seguir este formato JSON:
{
  "message": "string",
  "data": {}, // Array para list/search, Objeto para create/get/update
  "error": "string o null",
  "traceback": "string o null"
}

--- DATOS DE CONTEXTO DE LA PANTALLA ---

MÓDULO: Actos Litúrgicos
SUBMÓDULO: Gestionar Eventos (Tabla principal: event_variant)
FUNCIONALIDADES DE LA UI (CRUD):

1.  **Listado/Búsqueda:** Pantalla principal. Muestra ID, Nombre, Descripción, Capilla, Tipo (Privado/Comunitario), Personas, Estado.
    * Necesita paginación, búsqueda por texto, y filtros opcionales por Capilla ID y Estado.

2.  **Añadir Evento (Create):** Modal de creación.
    * Requiere APIs auxiliares para seleccionar el **Evento Base (Catálogo)** y la **Capilla**.
    * Campos a crear en EventVariant: event_id (base), chapel_id, name, description, max_capacity (Número de personas).

3.  **Editar Evento (Update/Patch):** Modal de edición.
    * Permite modificar: name, description, max_capacity, y el estado (switch).
    * El campo Capilla no parece ser editable.

4.  **Detalles (Get):** Modal de vista.
    * Recupera la información completa.

5.  **Eliminar Evento (Patch/Delete Lógico):** Confirmación de eliminación.
    * Debe ser una baja lógica (`active=false`). Usar método PATCH.

--- TAREAS DE GENERACIÓN ---

Generar las especificaciones de los siguientes endpoints con sus cuerpos de entrada y salida (datos) detallados, incluyendo las APIs auxiliares necesarias para el modal de 'Añadir evento':

1.  /api/acts/events/variants/list [POST]
2.  /api/acts/events/variants/search [POST]
3.  /api/acts/events/variants/create [POST]
4.  /api/acts/events/variants/{id} [GET]
5.  /api/acts/events/variants/{id} [PATCH] (Para edición y baja lógica)

API AUXILIAR 1 (Catálogo Eventos Base): /api/catalogs/events/search [POST]
API AUXILIAR 2 (Capillas Parroquia): /api/parish/chapels/search [POST]


----------------------------------------------------------------------
--- INSTRUCCIONES DE GENERACIÓN DE API (Gestionar Requisitos)
Para: routes_private_actos_GestionarRequisitos.yaml
---
OBJETIVO:
Generar la especificación completa de las rutas (endpoints) del Módulo 'Actos Litúrgicos' - Submódulo 'Gestionar Requisitos' (Tabla principal: chapel_event_requirement), basándose estrictamente en las reglas de nomenclatura y formato de respuesta.

JERARQUÍA DE MÓDULOS REQUERIDA:
La ruta base para este módulo debe ser: /api/acts

REGLAS DE ENDPOINTS:
1.  **Obtener/Ver:** /{ruta}/{id} [GET]
2.  **Actualizar (Total):** /{ruta}/{id} [PUT]
3.  **Actualizar (Parcial/Lógica):** /{ruta}/{id} [PATCH] (Usar para baja lógica de 'Estado' o 'Eliminar').
4.  **Crear:** /{ruta}/create [POST]
5.  **Listar (Paginado):** /{ruta}/list [POST]
6.  **Buscar (Paginado/Filtrado):** /{ruta}/search [POST]
7.  Los métodos GET no tienen body de entrada, solo parámetros de ruta o query.

REGLAS DE FORMATO DE RESPUESTA (OBLIGATORIO):
Todas las respuestas DEBEN seguir este formato JSON:
{
  "message": "string",
  "data": {}, // Array para list/search, Objeto para create/get/update
  "error": "string o null",
  "traceback": "string o null"
}

REGLA DE JERARQUÍA ANIDADA (OBLIGATORIO):
Dado que los Requisitos (chapel_event_requirement) dependen de un Evento (chapel_event), el endpoint debe ser anidado.

Ruta de la Entidad Superior (Capilla-Evento): /api/acts/chapel-events
Ruta de la Entidad Anidada (Requisito): /api/acts/chapel-events/{chapel_event_id}/requirements

--- DATOS DE CONTEXTO DE LA PANTALLA ---

MÓDULO: Actos Litúrgicos
SUBMÓDULO: Gestionar Requisitos (Tabla principal: chapel_event_requirement)

FLUJO DE PANTALLAS:
1.  **Panel Lateral ('Seleccionar evento'):** Requiere listar las combinaciones de Evento y Capilla (`chapel_event`) que la parroquia gestiona.
2.  **Listado/Búsqueda:** Al seleccionar un evento (ID de `chapel_event`), se lista la tabla de Requisitos. Muestra ID, Nombre, Descripción, y Estado (Switch).
3.  **Añadir Requisito (Create):** Modal de creación. Solo requiere **Nombre** y **Descripción**. (Se asume que `active=true` al crear).
4.  **Editar Requisito (Patch):** Modal de edición. Permite modificar **Nombre** y **Descripción**.
5.  **Eliminar Requisito (Patch Lógico):** Confirmación. Debe ser una baja lógica (`active=false`). Usar método PATCH.

--- TAREAS DE GENERACIÓN ---

Generar las especificaciones de los siguientes endpoints con sus cuerpos de entrada y salida (datos) detallados. El cuerpo de salida debe ser el objeto de la entidad correspondiente:

1.  API AUXILIAR (Listado del Panel Lateral): /api/acts/chapel-events/search [POST]
2.  Listar Requisitos (Anidado): /api/acts/chapel-events/{chapel_event_id}/requirements/list [POST]
3.  Buscar Requisitos (Anidado): /api/acts/chapel-events/{chapel_event_id}/requirements/search [POST]
4.  Crear Requisito (Anidado): /api/acts/chapel-events/{chapel_event_id}/requirements/create [POST]
5.  Ver Detalle Requisito (Anidado): /api/acts/chapel-events/{chapel_event_id}/requirements/{id} [GET]
6.  Editar/Baja Lógica Requisito (Anidado): /api/acts/chapel-events/{chapel_event_id}/requirements/{id} [PATCH]

----------------------------------------------------------------------
--- INSTRUCCIONES DE GENERACIÓN DE API ---

Para: routes_private_actos_GestionarHorarios.yaml

---
OBJETIVO:
Generar la especificación completa de las rutas (endpoints) del Módulo 'Actos Litúrgicos' - Submódulo 'Gestionar Horarios', basándose estrictamente en las reglas de nomenclatura y formato de respuesta. Este submódulo maneja dos tablas: Horario General (general_schedule) y Horario Específico/Excepción (specific_schedule).

JERARQUÍA DE MÓDULOS REQUERIDA:
La ruta base para este módulo debe ser: /api/acts

REGLAS DE ENDPOINTS:
1.  **Obtener/Ver:** /{ruta}/{id} [GET]
2.  **Actualizar (Total):** /{ruta}/{id} [PUT]
3.  **Actualizar (Parcial/Lógica):** /{ruta}/{id} [PATCH] (Usar para baja lógica de 'Estado' o 'Eliminar').
4.  **Crear:** /{ruta}/create [POST]
5.  **Listar (Paginado):** /{ruta}/list [POST]
6.  **Buscar (Paginado/Filtrado):** /{ruta}/search [POST]
7.  Los métodos GET no tienen body de entrada, solo parámetros de ruta o query.

REGLAS DE FORMATO DE RESPUESTA (OBLIGATORIO):
Todas las respuestas DEBEN seguir este formato JSON:
{
  "message": "string",
  "data": {}, // Array para list/search, Objeto para create/get/update
  "error": "string o null",
  "traceback": "string o null"
}

REGLA DE JERARQUÍA ANIDADA:
Los horarios (general y específico) deben estar anidados bajo la Capilla ID que está activa en la Parroquia, aunque para simplificar la interfaz, usaremos una ruta más directa, asumiendo que el ID de la Capilla se pasa como filtro o parte del body.

Ruta para Horarios Generales: /api/acts/schedules/general
Ruta para Horarios Específicos: /api/acts/schedules/specific

--- DATOS DE CONTEXTO DE LA PANTALLA ---

MÓDULO: Actos Litúrgicos
SUBMÓDULO: Gestionar Horarios

ENTIDAD 1: HORARIO GENERAL (general_schedule)
* **Funcionalidad:** Matriz de disponibilidad recurrente por día de la semana (Lunes-Domingo) y rango de horas.
* **Listado:** Se requiere listar todos los bloques de horario general para una **Capilla ID** específica.
* **Campos clave:** chapel_id, day_of_week (int), start_time (time), end_time (time).

ENTIDAD 2: HORARIO ESPECÍFICO/EXCEPCIÓN (specific_schedule)
* **Funcionalidad:** Excepciones de Disponibilidad (OPEN) y No Disponibilidad (CLOSED).
* **Listado/Búsqueda:** Se requiere listar todas las excepciones para una **Capilla ID** y un **rango de fechas**.
* **Crear/Editar:** Permite agregar o modificar una excepción con Fecha, Hora de inicio/fin (si es OPEN), y Motivo.
* **Eliminar:** Confirmación de eliminación (DELETE físico o lógico si se prefiere). Usaremos PATCH para baja lógica si se usa.

--- TAREAS DE GENERACIÓN ---

Generar las especificaciones de los siguientes endpoints con sus cuerpos de entrada y salida (datos) detallados. Los listados deben ser por Capilla ID activa.

### HORARIO GENERAL (general_schedule)
1.  Listar Horarios: /api/acts/schedules/general/search [POST]
2.  Crear Horario: /api/acts/schedules/general/create [POST]
3.  Editar/Baja Lógica Horario: /api/acts/schedules/general/{id} [PATCH] (Para modificar horas o desactivar si fuera el caso)
4.  Eliminar Físico Horario: /api/acts/schedules/general/{id} [DELETE] (Dado que son bloques recurrentes, la eliminación física es común)

### HORARIO ESPECÍFICO (specific_schedule)
5.  Listar/Buscar Excepciones: /api/acts/schedules/specific/search [POST] (Requiere chapel_id y rango de fechas)
6.  Crear Excepción: /api/acts/schedules/specific/create [POST]
7.  Editar/Baja Lógica Excepción: /api/acts/schedules/specific/{id} [PATCH]
8.  Eliminar Físico Excepción: /api/acts/schedules/specific/{id} [DELETE]

----------------------------------------------------------------------
--- INSTRUCCIONES DE GENERACIÓN DE API (Gestionar Reservas)

Para: routes_private_actos_GestionarReservas.yaml
---

OBJETIVO:
Generar la especificación completa de las rutas (endpoints) del Módulo 'Actos Litúrgicos' - Submódulo 'Gestionar Reservas' (Tabla principal: reservation), basándose estrictamente en las reglas de nomenclatura y formato de respuesta. Esta es la vista administrativa/parroquial.

JERARQUÍA DE MÓDULOS REQUERIDA:
La ruta base para este módulo debe ser: /api/acts

REGLAS DE ENDPOINTS:
1.  **Obtener/Ver:** /{ruta}/{id} [GET]
2.  **Actualizar (Total):** /{ruta}/{id} [PUT]
3.  **Actualizar (Parcial/Lógica):** /{ruta}/{id} [PATCH] (Usar para baja lógica de 'Estado' o 'Eliminar').
4.  **Crear:** /{ruta}/create [POST]
5.  **Listar (Paginado):** /{ruta}/list [POST]
6.  **Buscar (Paginado/Filtrado):** /{ruta}/search [POST]
7.  Los métodos GET no tienen body de entrada, solo parámetros de ruta o query.

REGLAS DE FORMATO DE RESPUESTA (OBLIGATORIO):
Todas las respuestas DEBEN seguir este formato JSON:
{
  "message": "string",
  "data": {}, // Array para list/search, Objeto para create/get/update
  "error": "string o null",
  "traceback": "string o null"
}

--- DATOS DE CONTEXTO DE LA PANTALLA ---

MÓDULO: Actos Litúrgicos (Administrativo)
SUBMÓDULO: Gestionar Reservas (Tabla principal: reservation)

FUNCIONALIDADES DE LA UI (CRUD):
1.  **Listado/Búsqueda:** Pantalla principal. Muestra ID, Usuario (nombre), Evento, Fecha, Monto, y Estado.
    * Necesita paginación, búsqueda por texto (ej. por nombre de usuario/evento) y filtros opcionales por Fecha y Estado.
2.  **Detalles (View):** Modal que muestra el detalle de la reserva (Evento, Fecha, Usuario, Monto, Estado).
    * Se utiliza el endpoint GET.
3.  **Editar (Edit):** Modal que permite editar la reserva. Las pantallas sugieren que la edición principal es el **Monto** y el **Estado**.
    * Se debe usar el endpoint PATCH para cambiar el estado.
    * El modal "Cambiar estado reserva" confirma que hay una acción específica para modificar el campo `status`.

--- TAREAS DE GENERACIÓN ---

Generar las especificaciones de los siguientes endpoints con sus cuerpos de entrada y salida (datos) detallados. Los listados y búsquedas deben filtrar automáticamente por la Parroquia ID activa del administrador logueado:

1.  /api/acts/reservations/list [POST]
2.  /api/acts/reservations/search [POST]
3.  /api/acts/reservations/{id} [GET]
4.  /api/acts/reservations/{id} [PATCH] (Para actualizar Monto, y la fecha si se permite)
5.  /api/acts/reservations/{id}/status [PATCH] (Endpoint específico para cambiar el estado de la reserva, si se requiere una ruta separada por lógica de negocio)